#! /bin/sh
#
# $Id$
#
# Parse all template files and expand them into real files
# Roland Mas, debian-sf (Sourceforge for Debian)

filenames="local.inc database.inc sf-httpd.conf sf-httpd.secrets local.pl"
for i in $filenames ; do
    [ -f /etc/sourceforge/templates/${i}.template ] && \
    /usr/lib/sourceforge/bin/fill-in-the-blanks.pl \
	/etc/sourceforge/templates/${i}.template \
	/etc/sourceforge/$i
done

[ -f /etc/sourceforge/local.inc ] && chmod 644 /etc/sourceforge/local.inc
[ -f /etc/sourceforge/sf-httpd.conf ] && chmod 644 /etc/sourceforge/sf-httpd.conf

[ -f /etc/sourceforge/database.inc ] && chown sourceforge:sourceforge /etc/sourceforge/database.inc
[ -f /etc/sourceforge/database.inc ] && chmod 640 /etc/sourceforge/database.inc

chown sourceforge:sourceforge /etc/sourceforge/local.pl
chmod 640 /etc/sourceforge/local.pl
