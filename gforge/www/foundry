<?php
/**
  *
  * Foundry Redirector
  *
  * SourceForge: Breaking Down the Barriers to Open Source Development
  * Copyright 1999-2001 (c) VA Linux Systems
  * http://sourceforge.net
  *
  * @version   $Id: foundry,v 1.19 2001/05/22 21:39:30 pfalcon Exp $
  *
  */


require_once('pre.php');

//
//	IMPORTANT NOTE!!!
//	The $foundry object is set up in the logger now - a hack to support stats!
//

//
//	test to see if the logger was successful in setting up the objects
//
if (!$group_id || !$foundry) {
        exit_error("Invalid Foundry","Invalid Foundry");
} else {
	if (!$foundry->isFoundry() || $foundry->isError()) {
		//not a foundry or some problem - show error
		//echo $foundry->isFoundry();
		//echo $foundry->getErrorMessage();
		exit_error('Error','The id you provided is not a valid foundry id');
	}

	if ($expl_pathinfo[4]) {
		//third subdirectory - must be admin page
		if ($expl_pathinfo[4] == 'news') {
			//foundry news admin
			include_once('foundry_news.php');
		} else if ($expl_pathinfo[4] == 'html') {
			//freeform HTML editor
			include_once('foundry_html_admin.php');
		} else {
			//foundry admin
			include_once('foundry_admin.php');
		}
	} else if ($expl_pathinfo[3]) {
		//root admin page
		include_once('foundry_admin.php');
	} else {
		//show the portal summary page
		include_once('foundry_home.php');
	}
}

?>
