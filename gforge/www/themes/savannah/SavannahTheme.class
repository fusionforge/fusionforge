<?php

//
// Copyright 1999-2000 (c) The SourceForge Crew
//
//  This is a modified version made by the Savannah Project
//  Copyright 2000-2001 (c) Free Software Foundation
//
//  Further modified by rts for GForge.
//  Copyright 2003 (c) GForge Development Team.
//
// This program is free software; you can redistribute it and/or
// modify it under the terms of the GNU General Public License
// as published by the Free Software Foundation; either version 2
// of the License, or (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program; if not, write to the Free Software
// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
//
//
// http://sourceforge.net
//
// $Id$

require_once('menu.php');

/**
 * SavannahTheme base class.
 * This is the base class for all savannah_* themes.  The constructor for each of the
 * specific themes should set $this->imgroot and $this->stylesheet.  This class takes
 * care of the rest.
 *
 * @date 2003-01-01
 */
class SavannahTheme extends Layout {

	var $stylesheet;

	function Theme() {
		// Parent constructor
		$this->Layout();

		// None of this used, but include it for completeness' sake
		// The content background color
		$this->COLOR_CONTENT_BACK= '#EAC164';

		// The background color
		$this->COLOR_BACK= '#FFFFFF';

		// The primary light background color
		$this->COLOR_LTBACK1= '#FFF4A8';

		// The secondary light background color
		$this->COLOR_LTBACK2= '#FFF4A8';

		// The HTML box title color
		$this->COLOR_HTMLBOX_TITLE = '#DAD5D7';

		// The HTML box background color

		$this->COLOR_HTMLBOX_BACK = '#FFF4A8';

		// Font Face Constants
		// The content font
		$this->FONT_CONTENT = 'Helvetica';
		// The HTML box title font
		$this->FONT_HTMLBOX_TITLE = 'Helvetica';
		// The HTML box title font color
		$this->FONTCOLOR_HTMLBOX_TITLE = '#333333';
		// The content font color
		$this->FONTCOLOR_CONTENT = '#333333';
		//The smaller font size
		$this->FONTSIZE_SMALLER='x-small';
		//The smallest font size
		$this->FONTSIZE_SMALLEST='xx-small';
		//The HTML box title font size
		$this->FONTSIZE_HTMLBOX_TITLE = 'small';
	}

	// Box Top, equivalent to html_box1_top()
	function box1_top($title,$echoout=1,$bgcolor='') {
		$return = '<table summary="" class="boxtable">
			<tr>
				<td colspan="2" class="boxtitle">'.$title.'</td>
			</tr>
		       <tr>
				<td colspan="2" class="boxitem">';
		if ($echoout) {
			print $return;
		} else {
			return $return;
		}
	}

	// Box Middle, equivalent to html_box1_middle()
	function box1_middle($title,$bgcolor='') {
		return '
				</td>
			</tr>
			<tr>
				<td colspan="2" class="boxtitle">'.$title.'</td>
			</tr>
			<tr>
				<td colspan=2 class="boxitem">';
	}

	// Get an alternating row style for tables.
	function box1_get_alt_row_style($i) {
		if ($i % 2 == 0) {
			return 'class=boxitem';
		} else {
			return 'class=boxitemalt';
		}
	}

	// Box Bottom, equivalent to html_box1_bottom()
	function box1_bottom($echoout=1) {
		$return = '
		</td>
			</tr>
	</table>
';
		if ($echoout) {
			print $return;
		} else {
			return $return;
		}
	}

	// generic_header_start() - Start a generic HTML header
	function generic_header_start($params) {

		global $Language, $sys_name;

		if (!$params['title']) {
			$params['title'] = $sys_name;
		} else {
			$params['title'] = $sys_name.": " . $params['title'];
		}
		print '<?xml version="1.0" encoding="' . $Language->getEncoding() . '?>';
?>

<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Server: <?php echo $sys_name; ?> -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php echo $Language->getLanguageCode() ?>" lang="<?php echo $Language->getLanguageCode(); ?>">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=<?php echo $Language->getEncoding(); ?>" />
		<title><?php echo $params['title']; ?></title>
		<script language="JavaScript" type="text/javascript">
		<!--
		function help_window(helpurl) {
			HelpWin = window.open( '<?php echo ((session_issecure()) ? 'https://'.$GLOBALS['sys_default_domain'] : 'http://'.$GLOBALS['sys_default_domain'] ); ?>' + helpurl,'HelpWindow','scrollbars=yes,resizable=yes,toolbar=no,height=400,width=400');
		}
		// -->
		</script>
		<meta name="Author" content="Copyright (C) 2000, 2001, 2002 Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111, USA Verbatim copying and distribution of this entire article is permitted in any medium, provided this notice is preserved" />
		<meta name="Keywords" content="Savannah,GNU, FSF, Free Software Foundation, Linux, Emacs, GCC, Unix, Free Software, Operating System, GNU Kernel, HURD, GNU HURD, SourceForge" />
		<meta name="Description" content="Savannah is a central point for development, distribution and maintainance of Free Software. It allows contributors to easily join existing Free Software projects." />
<?php
	// 2002-04-15 yeupou@coleumes.org
	// NOW we stop to use favico.ico read http://bugzilla.mozilla.org/show_bug.cgi?id=110296
?>
		<link rel="stylesheet" type="text/css" href="<?php echo $this->stylesheet ?>" />
		<link rel="icon" type="image/png" href="/images/debian-sf-icon.png" />
<?php
	}

	function generic_header_end($params) {
?>
	</head>
<?php
	}

	function generic_footer($params) {
		global $sys_show_source;
		if ($sys_show_source) {
			global $SCRIPT_NAME;
			echo("\n");
			echo('<a href="/source.php?file=' . $SCRIPT_NAME . "\">Show Source</a>\n");
		}
		echo("\n</body>\n</html>\n");
	}

	function header($params) {
		$this->generic_header_start($params);

		//themable someday?
		$site_fonts='helvetica,sans-serif';

		$this->generic_header_end($params);

?>

<body>

<!-- start page body -->
<table summary="" class="standardtable">
	<tr>
		<td colspan="3">
		<!-- start main body cell -->

		<table summary="" class="standardtable">
			<tr>
				<td class="menutable">

<?php
        if (!session_issecure()) {
                //print '<IMG src="/images/clear.png" width=140 height=1 alt="Counter"><BR>';
        } else {
                //print html_blankimage(1,140) . '<br>';
        }
?>

				<a href="/"><?php print html_image("floating.png",'150','130', array('alt'=>'Floating GNU')); ?></a>
				<p />
				<!-- menus -->
<?php
	menu_print_sidebar($params);
?>
				<p />
			        </td>

				<td class="contenttable">
				<br />
<?php
	}

	function footer($params) {
?>
				<!-- end content -->
				</td>
			</tr>
		</table>
		</td>
	</tr>
</table>

<!-- themed page footer -->
<?php
		$this->generic_footer($params);
	}



	function menuhtml_top($title) {
        	/*
                	Use only for the top most menu
	        */
?>
<table summary="" class="menutable">
	<tr>
		<td class="menutitle"><?php echo $title; ?><br /></td>
	</tr>
	<tr>
		<td class="menuitem">
<?php
	}


	function menuhtml_bottom() {
	        /*
        	        End the table
	        */
        	print '
		<br />
		</td>
	</tr>
</table>
';
	}

	function menu_entry($link, $title) {
		print "\t".'<a href="'.$link.'">'.$title.'</a>&nbsp;&nbsp;';
		print html_image("point.png",'7','7',array('alt'=>' > '));
		print '&nbsp;&nbsp;<br />';
	}

	/*!	@function tab_entry
		@abstract Prints out the a themed tab, used by project_tabs
		@param	$url is the URL to link to
			$icon is the image to use (if the theme uses it)
			$title is the title to use in the link tags
			$selected is a boolean to test if the tab is 'selected'
		@result text - echos HTML to the screen directly
	*/
	function tab_entry($url='http://localhost/', $icon='', $title='Home', $selected=0) {
		print '
		<a ';
		if ($selected){
			print 'class=tabselect ';
		} else {
			print 'class=tabs ';
		}
		print 'href="'. $url .'">' . $title . '</a>&nbsp;|&nbsp;';
	}
}

?>
