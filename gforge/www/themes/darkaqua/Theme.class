<?php

//
// Dark Aqua Theme for GForge
//
// Copyright 2003 (c) Patrick McFarland
//
// This program is free software; you can redistribute it and/or
// modify it under the terms of the GNU General Public License
// as published by the Free Software Foundation; either version 2
// of the License, or (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program; if not, write to the Free Software
// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
//

class Theme extends Layout {
   function Theme() {
	GLOBAL $bgpri;

	$this->Layout();

	//$bgpri[1] = '#dadada';
	//$bgpri[2] = '#d0d0da';
	//$bgpri[3] = '#cacada';
	//$bgpri[4] = '#c0c0da';
	//$bgpri[5] = '#babada'; // White to Blue
	//$bgpri[6] = '#b0b0da'; // Feel free to use somewhere else
	//$bgpri[7] = '#aaaada';
	//$bgpri[8] = '#9090da';
	//$bgpri[9] = '#8a8ada';

	$bgpri[1] = '#111122';
	$bgpri[2] = '#222233';
	$bgpri[3] = '#333344';
	$bgpri[4] = '#444455';
	$bgpri[5] = '#555566';
	$bgpri[6] = '#555577';
	$bgpri[7] = '#555599';
	$bgpri[8] = '#5555cc';
	$bgpri[9] = '#5555ff';

	$this->imgroot = '/themes/darkaqua/images/';
	$this->imgproj = '/themes/darkaqua/images/ic/';

	$this->FONTSIZE = 'small';
	$this->FONTSIZE_SMALLER='x-small';
	$this->FONTSIZE_SMALLEST='xx-small';
	$this->FONTSIZE_HTMLBOX_TITLE = 'x-small';

	$this->COLOR_LTBACK1= '#000033';
	$this->COLOR_LTBACK2= '#000022';
	$this->COLOR_HTMLBOX_BACK = '#222233';
	$this->COLOR_HTMLBOX_SEP = '#222233';

	$this->FONT_CONTENT = 'serif';
	$this->FONT_HTMLBOX_TITLE = 'serif';
	$this->FONTCOLOR_HTMLBOX_TITLE = '#FFFFFF';
	$this->FONTCOLOR_CONTENT = '#FFFFFF';

	$this->BACKGROUND= 'newbackground.png';

	$this->TAB_HEIGHT=23;

	$this->COLOR_CONTENT_BACK= '#0000FF';
	$this->COLOR_BACK= '#00FF00';
	$this->COLOR_HTMLBOX_TITLE = '#FF0000';
   } // end of Theme

   function header($params) {
	global $Language, $sys_name;
	if (!$params['title']) {
		$params['title'] = "$sys_name";
	} else {
		$params['title'] = "$sys_name: " . $params['title'];
	}
   ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="<?php echo $Language->getLanguageCode(); ?>">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=<?php echo $Language->getEncoding(); ?>" />
<style type="text/css">
<!--
A { text-decoration: none; color: #ddddff }
A:hover { text-decoration: underline; color: #8080ff }

OL,UL,P,BODY,TR,TD,TH,FORM {
	font-family: <?php echo $site_fonts; ?>;
	font-size:<?php echo $this->FONTSIZE; ?>;
	color: <?php echo $this->FONTCOLOR_CONTENT ?>;
	}

IMG { vertical-align: bottom; }

H1 { font-size: x-large; font-family: <?php echo $site_fonts; ?>; }
H2 { font-size: large; font-family: <?php echo $site_fonts; ?>; }
H3 { font-size: medium; font-family: <?php echo $site_fonts; ?>; }
H4 { font-size: small; font-family: <?php echo $site_fonts; ?>; }
H5 { font-size: x-small; font-family: <?php echo $site_fonts; ?>; }
H6 { font-size: xx-small; font-family: <?php echo $site_fonts; ?>; }

PRE,TT { font-family: courier,sans-serif }

.title {
	color: #ffffff;
	font-weight: bold;
	font-size: <?php echo $this->FONTSIZE; ?>;
}

A.tablink {
	color: #ffffff;
	text-decoration: none;
	font-weight: bold;
	font-size: <?php echo $this->FONTSIZE; ?>;
}

A.tablink:visited {
	color: #ffffff;
	text-decoration: none;
	font-weight: bold;
	font-size: <?php echo $this->FONTSIZE; ?>;
}

A.tablink:hover {
	text-decoration: none;
	color: #ffffff;
	font-weight: bold;
	font-size: <?php echo $this->FONTSIZE; ?>;
}

A.tabsellink {
	color: #ffffff;
	text-decoration: none;
	font-weight: bold;
	font-size: <?php echo $this->FONTSIZE; ?>;
}

A.tabsellink:visited {
	color: #ffffff;
	text-decoration: none;
	font-weight: bold;
	font-size: <?php echo $this->FONTSIZE; ?>;
}

A.tabsellink:hover {
	text-decoration: none;
	color: #ffffff;
	font-weight: bold;
	font-size: <?php echo $this->FONTSIZE; ?>;
}

-->
</style>
<script language="JavaScript" type="text/javascript">
<!--
   function help_window(helpurl) {
   	HelpWin = window.open( '<?php echo ((session_issecure()) ? 'https://'.
	$GLOBALS['sys_default_domain'] : 'http://'.$GLOBALS['sys_default_domain']); ?>' + helpurl,'HelpWindow','scrollbars=yes,resizable=yes,toolbar=no,height=400,width=400');
   }
// -->
</script>
<title><?php echo $params['title']; ?></title>
</head>
<body bgcolor="#000000" text="#ffffff">
<table border="0" width="100%" cellspacing="0" cellpadding="0">
<tr>
<td>
<a href="/"><img name="logo" border="0" height="52" width="312" src="<?php echo $this->imgroot.'logo.png'; ?>" alt="GForge Logo" /></a>
</td>
<td valign="middle"><?php echo $this->searchBox(); ?></td>
<td align="right">
<?php
	if (session_loggedin()) {
?>
<table border="0" cellspacing="0" cellpadding="0"><tr>
<td align="right"><img src="<?php echo $this->imgroot.'tabs/leftselect.png'; ?>" width="7" height="23" alt="[left]" /></td>
<td align="center" style="background-image: url(<?php echo $this->imgroot; ?>tabs/select.png)">&nbsp;<a href="/account/logout.php" class="tabsellink">Logout</a>&nbsp;</td>
<td align="left"><img src="<?php echo $this->imgroot.'tabs/rightselect.png'; ?>" width="7" height="23" alt="[right]" /></td>
</tr><tr><td>&nbsp;</td></tr><tr>
<td align="right"><img src="<?php echo $this->imgroot.'tabs/leftdeselect.png'; ?>" width="7" height="23" alt="[left]" /></td>
<td align="center" style="background-image: url(<?php echo $this->imgroot; ?>tabs/deselect.png)">&nbsp;<a href="/account/" class="tablink">My Account</a>&nbsp;</td>
<td align="left"><img src="<?php echo $this->imgroot.'tabs/rightdeselect.png'; ?>" width="7" height="23" alt="[right]" /></td></tr>
</table>
<?php
	} else {
?>
<table border="0" cellspacing="0" cellpadding="0"><tr>
<td align="right"><img src="<?php echo $this->imgroot.'tabs/leftdeselect.png'; ?>" width="7" height="23" alt="[left]" /></td>
<td align="center" style="background-image: url(<?php echo $this->imgroot; ?>tabs/deselect.png)">&nbsp;<a href="/account/login.php" class="tablink">Login</a>&nbsp;</td>
<td align="left"><img src="<?php echo $this->imgroot.'tabs/rightdeselect.png'; ?>" width="7" height="23" alt="[right]" /></td>
</tr><tr><td>&nbsp;</td></tr><tr>
<td align="right"><img src="<?php echo $this->imgroot.'tabs/leftdeselect.png'; ?>" width="7" height="23" alt="[left]" /></td>
<td align="center" style="background-image: url(<?php echo $this->imgroot; ?>tabs/deselect.png)">&nbsp;<a href="/account/register.php" class="tablink">New Account</a>&nbsp;</td>
<td align="left"><img src="<?php echo $this->imgroot.'tabs/rightdeselect.png'; ?>" width="7" height="23" alt="[right]" /></td></tr>
</table>
<?php
	}
?>
</td>
<td>&nbsp;&nbsp;</td>
</tr>
<tr><td><img src="<?php echo $this->imgroot; ?>clear.png" height="15" alt="[clear]" /></td></tr>

</table>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
<tr>
<td>&nbsp;</td>
<td><?php echo $this->outerTabs($params); ?></td>
<td>&nbsp;</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<?php
if ($params['group']) {
echo '<br \>';
echo $this->projectTabs($params['toptab'],$params['group']);
}
?><br \>
</td>
<td>&nbsp;</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<?
   } // end of header


   function footer($params) {
   ?>
</td>
<td>&nbsp;</td>
</tr>
</table>
</body>
</html>
   <?
   } // end of footer

   
   function tabGenerator($TABS_DIRS,$TABS_TITLES,$nested=false,$selected=false,$sel_tab_bgcolor='BLACK',$total_width='100%') {

	$dark='deselect';
	$light='select';

	$count=count($TABS_DIRS);
	$width=intval((100/$count));

	$return .= '
	<!-- start tabs -->
	<table border="0" cellpadding="0" cellspacing="0" width="'.$total_width.'">
	<tr>';

	if ($nested) {
		$inner='-inner';
	} else {
		$inner='';
	}

	for ($i=0; $i<$count; $i++) {
	$whichone=(($selected==$i)?$light:$dark);
	$return .= '
	<td width="7" align="right">
	<img src="'.$this->imgroot.'tabs/left'.$whichone.'.png" width="7" height="23" alt="[left]" />
	</td>
	<td width="'.$width.'%" valign="middle" align="center" style="background-image: url('.$this->imgroot.'tabs/'.$whichone.'.png)">
	<a class="'. (($selected==$i)?'tabsellink':'tablink') .'" href="'. $TABS_DIRS[$i] .'">'. $TABS_TITLES[$i] .'</a>
	</td>
	<td width="7" align="left">
	<img src="'.$this->imgroot.'tabs/right'.$whichone.'.png" width="7" height="23" alt="[right]" />
	</td>
';
	}

	$return .= '</tr></table>';
	return $return;
   } // end of tabGenerator

   function boxGetAltRowStyle($i) {
	if ($i % 2 == 0) {
		return 'style="background-color:' . $this->COLOR_LTBACK2 . '"';
	} else {
		return 'style="background-color:' . $this->COLOR_LTBACK1 . '"';
	}
   } // end of boxGetAltRowStyle

   function boxTop($title) {
   return '
<!-- boxTop -->
<table cellspacing="0" cellpadding="0" width="100%" border="0">
<tr><td width="16" style="vertical-align: top; background-image: url('.$this->imgroot.'tabs/background-right.png)"><img src="'.$this->imgroot.'tabs/top.png" alt="[top]" /></td><td style="background-image: url('.$this->imgroot.'tabs/background-top.png); vertical-align: top"><span class="title">'.$title.'</span></td><td width="16" style="vertical-align: top"><img src="'.$this->imgroot.'tabs/right.png" alt="[right]"/></td></tr>
<tr><td style="background-image: url('.$this->imgroot.'tabs/background-right.png)">&nbsp;</td><td><table width="100%" cellspacing="0" cellpadding="0" border="0"><tr><td>';
   } // end of boxTop

   function boxBottom() {
   return '
<!-- boxBottom -->
</td></tr></table>
</td><td>&nbsp;</td>
</tr>
<tr><td style="vertical-align: top"><img src="'.$this->imgroot.'tabs/bottom.png" alt="[bottom]"/></td><td>&nbsp;</td><td>&nbsp;</td></tr>
</table>
<p />';
   } // end of boxBottom()

   function boxMiddle($title) {
   return ''.$this->boxBottom().''.$this->boxTop($title).'';
   }

   function multiTableRow($row_attr, $cell_data, $istitle) {
   $return= '
<!-- multiTableRow -->
<tr '.$row_attr;
   if ( $istitle ) {
	$return .=' align="center"';
   }
   $return .= '>';
   for ( $c = 0; $c < count($cell_data); $c++ ) {
	$return .='<td ';
	for ( $a=1; $a < count($cell_data[$c]); $a++) {
		$return .= $cell_data[$c][$a].' ';
	}
	$return .= '>';
	if ( $istitle ) {
		$return .='<table style="background-image: url('.$this->imgroot.'tabs/background-top.png)" width="100%" cellspacing="0" cellpadding="0" border="0"><tr><td style="align: right; vertical-align: top"><img src="'.$this->imgroot.'tabs/left.png" alt="[left]"/></td><td width="100%" style="align: center"><span class="title">';
	}
		$return .= $cell_data[$c][0];
	if ( $istitle ) {
		$return .='</span></td><td style="align: left; vertical-align: top"><img src="'.$this->imgroot.'tabs/right.png" alt="[right]" /></td></tr></table>';
	}
	$return .= '</td>';
   }
   $return .= '</tr>
   <!-- end multiTableRow -->
   ';
   return $return;
   } // end of multiTableRow()


   // listTableTop has additional padding to make it look like multiTableRow()
   function listTableTop ($title_arr,$links_arr=false) {
   $return = '
<table cellspacing="0" cellpadding="0" width="100%" border="0">
<tr>';
   $count=count($title_arr);
   if ($links_arr) {
	for ($i=0; $i<$count; $i++) {
	$return .= '
<td align="left" class="title" style="background-image: url('.$this->imgroot.'tabs/background-top.png)"><a href="'.$links_arr[$i].'">'.$title_arr[$i].'</a></td>';
	}
   } else {
	for ($i=0; $i<$count; $i++) {
	if ($title_arr[$i] != ''){
	$return .= '<td>
<table cellspacing="0" cellpadding="0" border="0"><tr><td><img src="'.$this->imgroot.'clear.png" width="1" alt="[clear]" /></td><td width="100%">
<table style="background-image: url('.$this->imgroot.'tabs/background-top.png)" width="100%" cellspacing="0" cellpadding="0" border="0"><tr><td style="align: right; vertical-align: top"><img src="'.$this->imgroot.'tabs/left.png" alt="[left]" /></td><td width="100%"><span class="title">'.$title_arr[$i].'</span></td><td style="align: left; vertical-align: top"><img src="'.$this->imgroot.'tabs/right.png" alt="[right]" /></td></tr></table>
</td><td><img src="'.$this->imgroot.'clear.png" width="2" alt="[clear]" /></td></tr><tr><td colspan="3"><img src="'.$this->imgroot.'clear.png" height="1" alt="[clear]" /></td></tr></table>
</td>';
	}}
   }
   $return .= '
</tr>
<tr align="left">
<td colspan="'.$count.'" height="1"><img src="'.$this->imgroot.'clear.png" height="1" width="1" alt="[clear]" /></td>
</tr>';
return $return;
   } // end of listTableTop()

   function listTableBottom() {
   return '</table>';
   }

}
?>

