# Per-user macro to:
# - specific explicit user (Require $user)
# - only create user URL if the user is valid
#   (avoids /authscm/root/ or /authscm/bin/ access)
#   Maybe we can switch to LimitUIDRange, cf. 20-vhosts-scm.conf

<Macro ScmsvnUser $user>
<Location /authscm/$user/svn>
  DAV svn
  SVNParentPath {scmsvn/repos_path}
  # Note: ^ this need to be in the macro, doesn't work in a LocationMatch
  # Only authenticated users may access the repository:
  Require user $user
  # Note: ^ AuthzSVNAccessFile would have priority over this so don't use it
</Location>
ScriptAlias /authscm/$user/viewvc {core/source_path}/plugins/scmsvn/cgi-bin/viewvc.cgi
# Authentified via cookie in viewvc.php:
#<Location /authscm/$user/viewvc>
#  Require user $user
#</Location>
</Macro>
