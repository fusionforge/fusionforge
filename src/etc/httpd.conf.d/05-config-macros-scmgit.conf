<Macro ScmgitProjectWithAnon $project>
<LocationMatch "^/git/$project/">
  Require all granted
</LocationMatch>

<LocationMatch "^/authgit/[^/]+/$project/">
  Require valid-user
</LocationMatch>
</Macro>

<Macro ScmgitProjectWithoutAnon $project>
<LocationMatch "^/authgit/[^/]+/$project/">
  Require group scm_$project
</LocationMatch>

<LocationMatch "^/authgit/[^/]+/$project/.*/git-receive-pack$">
  AuthMerging And
  Require group scm_$project
</LocationMatch>
</Macro>

<Macro ScmgitUser $user>
<LocationMatch "^/authgit/$user/">
  Require user $user
</LocationMatch>

<LocationMatch "^/authgit/[^/]/[^/]users/$user/git-receive-pack$">
  AuthMerging And
  Require user $user
</LocationMatch>
</Macro>
