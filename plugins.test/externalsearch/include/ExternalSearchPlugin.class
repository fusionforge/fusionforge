<?php

/**
 * External search plugin
 *
 * Copyright 2004 (c) Guillaume Smet
 *
 * http://gforge.org
 *
 * @version $Id$
 */

require_once ('www/search/include/SearchManager.class');
require_once ('ExternalSearchEngine.class');

class ExternalSearchPlugin extends Plugin {
	function ExternalSearchPlugin() {
		$this->Plugin();
		$this->name = 'externalsearch';
		$this->text = 'External Search';
		
		$this->hooks[] = 'search_engines';
	}

	function CallHook($hookname, & $searchManager) {
		switch($hookname) {
			case 'search_engines':
				require_once('/etc/gforge/plugins/externalsearch/config.php');
				foreach($externalSearchEngines AS $name => $url) {
					$type = SEARCH__TYPE_IS_EXTERNAL.'_'.$name;
					$searchManager->addSearchEngine(
						$type,
						new ExternalSearchEngine($type, $name, $url)
					);
				}
				break;
		}
	}
}

// Local Variables:
// mode: php
// c-file-style: "bsd"
// End:

?>